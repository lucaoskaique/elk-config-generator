{
  "id": "root",
  "layoutOptions": {
    "elk.algorithm": "layered",
    "elk.direction": "RIGHT",
    "elk.edgeRouting": "SPLINES",
    "elk.spacing.nodeNode": "220",
    "elk.spacing.edgeNode": "120",
    "elk.spacing.edgeEdge": "80",
    "elk.layered.spacing.nodeNodeBetweenLayers": "250",
    "elk.layered.nodePlacement.strategy": "BRANDES_KOEPF",
    "elk.layered.nodePlacement.bk.fixedAlignment": "BALANCED",
    "elk.layered.crossingMinimization.strategy": "LAYER_SWEEP",
    "elk.layered.crossingMinimization.forceNodeModelOrder": "true",
    "elk.layered.thoroughness": "10",
    "elk.portConstraints": "FIXED_SIDE",
    "elk.portAlignment.default": "CENTER",
    "elk.padding": "[top=20, left=20, bottom=20, right=20]"
  },
  "children": [
    {
      "id": "input",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "input",
          "type": "Input",
          "version": null,
          "inputs": null,
          "type_params": {
            "T": "str"
          }
        },
        "definition": {
          "name": "Input",
          "description": "Input to a flow - receives data from external sources or parent flows",
          "inputs": [],
          "outputs": [
            {
              "name": "data",
              "type": {
                "generic": {
                  "name": "T",
                  "value": {
                    "alias": "T"
                  }
                }
              }
            }
          ]
        }
      }
    },
    {
      "id": "persona",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "persona",
          "type": "Input",
          "version": null,
          "inputs": null,
          "type_params": {
            "T": "Persona"
          }
        }
      }
    },
    {
      "id": "profile",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "profile",
          "type": "Input",
          "version": null,
          "inputs": null,
          "type_params": {
            "T": "any"
          }
        }
      }
    },
    {
      "id": "angel_rating",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "angel_rating",
          "type": "Input",
          "version": null,
          "inputs": null,
          "type_params": {
            "T": "any"
          }
        }
      }
    },
    {
      "id": "conversation_history",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "conversation_history",
          "type": "JmesPathConverter",
          "type_params": {
            "InType": "str",
            "OutType": "ConversationHistory"
          }
        }
      }
    },
    {
      "id": "template_variables",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "template_variables",
          "type": "$flow_defs/CreateTemplateVariables"
        }
      }
    },
    {
      "id": "conversational",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "conversational",
          "type": "$flow_defs/Conversational"
        }
      }
    },
    {
      "id": "audio",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "audio",
          "type": "Output",
          "type_params": {
            "T": "any"
          }
        }
      }
    },
    {
      "id": "safety_alert",
      "type": "flx-component",
      "data": {
        "component": {
          "id": "safety_alert",
          "type": "Output",
          "type_params": {
            "T": "any"
          }
        }
      }
    }
  ],
  "edges": [
    {
      "id": "conversation_history-0",
      "sources": ["input"],
      "targets": ["conversation_history"]
    },
    {
      "id": "template_variables-0",
      "sources": ["input"],
      "targets": ["template_variables"]
    },
    {
      "id": "template_variables-1",
      "sources": ["persona"],
      "targets": ["template_variables"]
    },
    {
      "id": "template_variables-2",
      "sources": ["profile"],
      "targets": ["template_variables"]
    },
    {
      "id": "template_variables-3",
      "sources": ["angel_rating"],
      "targets": ["template_variables"]
    },
    {
      "id": "conversational-0",
      "sources": ["conversation_history"],
      "targets": ["conversational"]
    },
    {
      "id": "conversational-1",
      "sources": ["template_variables"],
      "targets": ["conversational"]
    },
    {
      "id": "audio-0",
      "sources": ["conversational"],
      "targets": ["audio"]
    },
    {
      "id": "safety_alert-0",
      "sources": ["conversational"],
      "targets": ["safety_alert"]
    }
  ]
}
